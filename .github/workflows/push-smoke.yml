name: Push Smoke

on:
  push:
    branches: [ main ]

jobs:
  smoke:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Print run metadata
        run: |
          echo "push-smoke: OK"
          echo "GITHUB_RUN_ID=$GITHUB_RUN_ID"
          echo "GITHUB_RUN_NUMBER=$GITHUB_RUN_NUMBER"
          echo "GITHUB_REPOSITORY=$GITHUB_REPOSITORY"
          echo "GITHUB_ACTOR=$GITHUB_ACTOR"

      - name: Create verification artifact
        run: |
          echo "push-smoke verified at $(date -u)" > smoke-verification.txt

      - name: Upload verification artifact
        uses: actions/upload-artifact@v4
        with:
          name: smoke-verification
          path: smoke-verification.txt
