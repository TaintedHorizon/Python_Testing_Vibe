{% extends 'base.html' %}
{% block title %}Order Documents for Batch {{ batch_id }}{% endblock %}
{% block content %}
<style>
    .doc-list-container { max-width: 800px; margin: auto; background-color: white; padding: 20px; border: 1px solid #ccc; border-radius: 5px; }
    .doc-list-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    .doc-list-table th, .doc-list-table td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: middle; }
    .doc-list-table th { background-color: #f2f2f2; }
    .action-btn { display: inline-block; padding: 8px 12px; text-decoration: none; color: white; border-radius: 5px; font-size: 0.9em; }
    .btn-order { background-color: #007BFF; }
    .btn-revisit { background-color: #6c757d; }
    .finish-form { margin-top: 20px; text-align: center; }
    .finish-btn {
        padding: 10px 25px;
        background-color: #28a745;
        color: white;
        border-radius: 5px;
        font-size: 1.1em;
        border: none;
        cursor: pointer;
    }
</style>

<div class="doc-list-container">
    <h1>Order Documents for Batch #{{ batch_id }}</h1>
    <p>Select a document below to review and set the correct page order.</p>

    <table class="doc-list-table">
        <thead>
            <tr>
                <th>Document Name</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for doc in documents %}
            <tr>
                <td>{{ doc.document_name }}</td>
                <td>
                    {% if doc.status == 'order_set' %}
                        <span style="color: green; font-weight: bold;">Order Set</span>
                    {% else %}
                        <span style="color: orange; font-weight: bold;">Pending Order</span>
                    {% endif %}
                </td>
                <td>
                    {% if doc.status == 'order_set' %}
                        <a href="{{ url_for('order_document_page', document_id=doc.id) }}" class="action-btn btn-revisit">Revisit Order</a>
                    {% else %}
                        <a href="{{ url_for('order_document_page', document_id=doc.id) }}" class="action-btn btn-order">Order Pages</a>
                    {% endif %}
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="3">No documents have been created for this batch yet.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <form class="finish-form" action="{{ url_for('finalize_batch_action', batch_id=batch_id) }}" method="post" onsubmit="return confirm('Are you sure you are finished ordering all documents for this batch?');">
        <button type="submit" class="finish-btn">Finalize Batch</button>
    </form>
</div>
{% endblock %}